{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, IconButton } from \"@material-ui/core\";\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\nexport default function Dashboard() {\n  var _useAuth = useAuth0(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      getAccessTokenSilently = _useAuth.getAccessTokenSilently;\n\n  var _useState = useState(),\n      resumeList = _useState[0],\n      setResumeList = _useState[1];\n\n  useEffect(function () {\n    getUserData();\n  }, [user]);\n\n  var getUserData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData, resumes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"http://localhost:3001/v1/users/me\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n              resumes = responseData.resumes.map(function (resume) {\n                return {\n                  id: resume.id,\n                  type: \"Resume\",\n                  title: \"Alexandra's resume\"\n                };\n              });\n              setResumeList(resumes);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function getUserData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var createResume = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context2.sent;\n              _context2.next = 6;\n              return fetch(\"http://localhost:3001/v1/resume/0\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                },\n                method: \"POST\"\n              });\n\n            case 6:\n              getUserData();\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0.message);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 9]]);\n    }));\n\n    return function createResume() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, null), __jsx(Box, {\n    p: 12,\n    bgcolor: \"#ffdbeb\",\n    minHeight: \"100vh\"\n  }, isAuthenticated ? __jsx(React.Fragment, null, __jsx(Box, {\n    pb: 5\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"My resumes and cover letters\"), __jsx(Typography, null, user.email)), __jsx(Grid, {\n    container: true,\n    spacing: 4\n  }, resumeList && resumeList.map(function (resume, i) {\n    return __jsx(Grid, {\n      item: true,\n      xs: 4,\n      sm: 3,\n      key: i\n    }, __jsx(Grid, {\n      container: true,\n      direction: \"column\"\n    }, __jsx(Grid, {\n      item: true\n    }, __jsx(Paper, {\n      style: {\n        height: \"calc(46vw - 180px)\",\n        width: \"100%\"\n      }\n    }, __jsx(Grid, {\n      container: true,\n      justify: \"space-between\",\n      alignContent: \"center\",\n      style: {\n        height: \"100%\"\n      },\n      direction: \"column\"\n    }, __jsx(Grid, {\n      item: true\n    }, __jsx(IconButton, null, __jsx(DeleteForeverIcon, null))), __jsx(Grid, {\n      item: true\n    }, __jsx(IconButton, null, __jsx(LaunchIcon, null))), __jsx(Grid, {\n      item: true\n    }, __jsx(IconButton, null, __jsx(GetAppIcon, null)))))), __jsx(Grid, {\n      item: true\n    }, \" \", __jsx(Box, {\n      pt: 1\n    }, \" \", __jsx(Typography, null, resume.type, \" - \", resume.id))), __jsx(Grid, {\n      item: true\n    }, \" \", __jsx(Typography, {\n      style: {\n        fontWeight: 700\n      }\n    }, resume.title))));\n  }), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    sm: 3\n  }, __jsx(Paper, {\n    style: {\n      height: \"calc(46vw - 180px)\",\n      width: \"100%\"\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    alignContent: \"center\",\n    style: {\n      height: \"100%\"\n    }\n  }, __jsx(Grid, {\n    item: true\n  }, __jsx(IconButton, {\n    onClick: function onClick() {\n      return createResume();\n    }\n  }, __jsx(AddIcon, null)))))))) : __jsx(React.Fragment, null)));\n}","map":null,"metadata":{},"sourceType":"module"}