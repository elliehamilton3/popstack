{"ast":null,"code":"import _extends from \"/ui/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/ui/pages/resume.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useRef } from \"react\";\nimport { Typography, Grid, TextField, Box, Switch, Chip } from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport Navbar from \"../components/navbar/navbar.component\";\nimport ParallelogramIcon from \"../components/icons/parallelogram.icon\";\nimport SquareIcon from \"../components/icons/square.icon\";\nimport { getFormValues } from \"../helper/getFormValues\";\nimport ResumeSection from \"../components/resume/resumeSection.component\";\nimport ResumePreview from \"../components/resume/resumePreview.component\";\nimport PersonalDetailsSection from \"../components/resume/personalDetails.component\";\nimport EducationSection from \"../components/resume/educationSection.component\";\nimport EmploymentSection from \"../components/resume/employmentSection.component\";\nimport LinkSection from \"../components/resume/linkSection.component\";\nexport default function Resume() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(),\n      skills = _useState[0],\n      setSkills = _useState[1];\n\n  var _useState2 = useState(undefined),\n      resume = _useState2[0],\n      setResume = _useState2[1];\n\n  var _useState3 = useState(1),\n      resumeStyle = _useState3[0],\n      setResumeStyle = _useState3[1];\n\n  var _useState4 = useState(false),\n      checked = _useState4[0],\n      setChecked = _useState4[1];\n\n  var formRef = useRef(null);\n\n  var _useAuth = useAuth0(),\n      getAccessTokenSilently = _useAuth.getAccessTokenSilently;\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData, _token, response1, responseData1, skillNames, _skillNames;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"http://localhost:3001/v1/resume/0\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n\n              if (!(responseData.statusCode === 404)) {\n                _context.next = 25;\n                break;\n              }\n\n              _context.next = 13;\n              return getAccessTokenSilently();\n\n            case 13:\n              _token = _context.sent;\n              _context.next = 16;\n              return fetch(\"http://localhost:3001/v1/resume\", {\n                method: \"POST\",\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(_token)\n                }\n              });\n\n            case 16:\n              response1 = _context.sent;\n              _context.next = 19;\n              return response1.json();\n\n            case 19:\n              responseData1 = _context.sent;\n              setResume(responseData1);\n              skillNames = responseData.skills.map(function (_ref2) {\n                var name = _ref2.name;\n                console.log(name);\n                return name;\n              });\n              setSkills(skillNames);\n              _context.next = 28;\n              break;\n\n            case 25:\n              setResume(responseData);\n              _skillNames = responseData.skills.map(function (_ref3) {\n                var name = _ref3.name;\n                console.log(name);\n                return name;\n              });\n              setSkills(_skillNames);\n\n            case 28:\n              _context.next = 33;\n              break;\n\n            case 30:\n              _context.prev = 30;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 33:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 30]]);\n    }))();\n  }, [getAccessTokenSilently]);\n\n  var updateResume = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var form, formData, token, response, responseData, skillNames;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              form = formRef.current;\n              formData = getFormValues(form);\n              console.log(skills);\n              formData.skills = skills;\n              _context2.prev = 4;\n              _context2.next = 7;\n              return getAccessTokenSilently();\n\n            case 7:\n              token = _context2.sent;\n              _context2.next = 10;\n              return fetch(\"http://localhost:3001/v1/resume/0\", {\n                method: \"PATCH\",\n                body: JSON.stringify(formData),\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 10:\n              response = _context2.sent;\n              _context2.next = 13;\n              return response.json();\n\n            case 13:\n              responseData = _context2.sent;\n              setResume(responseData);\n              skillNames = responseData.skills.map(function (_ref5) {\n                var name = _ref5.name;\n                console.log(name);\n                return name;\n              });\n              setSkills(skillNames);\n              _context2.next = 22;\n              break;\n\n            case 19:\n              _context2.prev = 19;\n              _context2.t0 = _context2[\"catch\"](4);\n              console.log(_context2.t0.message);\n\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 19]]);\n    }));\n\n    return function updateResume() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange() {\n    setChecked(!checked);\n    setResumeStyle(!checked ? 2 : 1);\n  };\n\n  var skillsList = [{\n    title: 'React'\n  }, {\n    title: 'Javascript'\n  }, {\n    title: 'Java'\n  }, {\n    title: 'Front-end'\n  }, {\n    title: 'Back-end'\n  }, {\n    title: 'UI Design'\n  }, {\n    title: 'UX Research'\n  }, {\n    title: 'Copywriting'\n  }, {\n    title: 'Illustrating'\n  }, {\n    title: 'Figma'\n  }];\n  return __jsx(React.Fragment, null, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }), __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, __jsx(ResumePreview, {\n    resume: resume,\n    resumeStyle: resumeStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    p: 3,\n    pt: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(\"form\", {\n    ref: formRef,\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, __jsx(Box, {\n    pb: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 23\n    }\n  }, !resume ? __jsx(Skeleton, {\n    variant: \"text\",\n    width: 140,\n    height: 26,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 34\n    }\n  }) : __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \"Your R\\xE9sum\\xE9\")), __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  }, __jsx(Switch, {\n    checked: checked,\n    onChange: handleChange,\n    name: \"checkedA\",\n    inputProps: {\n      'aria-label': 'secondary checkbox'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 23\n    }\n  }))))), __jsx(PersonalDetailsSection, {\n    loading: !resume,\n    onChange: updateResume,\n    firstName: resume && resume.user && resume.user.firstName,\n    lastName: resume && resume.user && resume.user.lastName,\n    phoneNumber: resume && resume.user && resume.user.phoneNumber,\n    email: resume && resume.user && resume.user.email,\n    title: resume && resume.resume && resume.resume.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }), __jsx(ResumeSection, {\n    loading: !resume,\n    icon: __jsx(ParallelogramIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }),\n    heading: \"Describe you and your work\",\n    subtitle: \"Summarise your professional career in 2 or 3 sentences.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, !resume ? __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"100%\",\n    height: 114,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 31\n    }\n  }) : __jsx(TextField, {\n    name: \"bio\",\n    fullWidth: true,\n    id: \"filled-textarea\",\n    multiline: true,\n    variant: \"filled\",\n    rows: 4,\n    defaultValue: resume && resume.resume && resume.resume.bio,\n    onChange: function onChange() {\n      return updateResume();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  })), resume && __jsx(EmploymentSection, {\n    employment: resume === null || resume === void 0 ? void 0 : resume.jobs,\n    onChange: updateResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 28\n    }\n  }), resume && __jsx(EducationSection, {\n    educations: resume === null || resume === void 0 ? void 0 : resume.educations,\n    onChange: updateResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 28\n    }\n  }), resume && skills && __jsx(ResumeSection, {\n    icon: __jsx(SquareIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }),\n    heading: \"Skills\",\n    subtitle: \"Add keywords to your resume to help potential employers get a clearer picture of what your skills are in the workplace.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 36\n    }\n  }, __jsx(Autocomplete, {\n    multiple: true,\n    id: \"skills\",\n    options: skillsList.map(function (option) {\n      return option.title;\n    }),\n    freeSolo: true,\n    renderTags: function renderTags(value, getTagProps) {\n      return value.map(function (option, index) {\n        return __jsx(Chip, _extends({\n          color: \"primary\",\n          label: option\n        }, getTagProps({\n          index: index\n        }), {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }\n        }));\n      });\n    } // defaultValue={[...skills]}\n    ,\n    onChange: function onChange(event, value) {\n      console.log(value);\n      setSkills(value);\n      updateResume();\n    },\n    renderInput: function renderInput(params) {\n      return __jsx(TextField, _extends({}, params, {\n        variant: \"filled\",\n        placeholder: \"Add skills\",\n        fullWidth: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 23\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 19\n    }\n  })), resume && __jsx(LinkSection, {\n    links: resume === null || resume === void 0 ? void 0 : resume.links,\n    onChange: updateResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 28\n    }\n  })))))));\n}\n\n_s(Resume, \"HmnPvC9/Bjo8SizmuxQBYQAtf3g=\", false, function () {\n  return [useAuth0];\n});\n\n_c = Resume;\n\nvar _c;\n\n$RefreshReg$(_c, \"Resume\");","map":{"version":3,"sources":["/ui/pages/resume.tsx"],"names":["useEffect","useState","useRef","Typography","Grid","TextField","Box","Switch","Chip","Skeleton","useAuth0","Autocomplete","Navbar","ParallelogramIcon","SquareIcon","getFormValues","ResumeSection","ResumePreview","PersonalDetailsSection","EducationSection","EmploymentSection","LinkSection","Resume","skills","setSkills","undefined","resume","setResume","resumeStyle","setResumeStyle","checked","setChecked","formRef","getAccessTokenSilently","token","fetch","headers","Accept","Authorization","response","json","responseData","statusCode","method","response1","responseData1","skillNames","map","name","console","log","message","updateResume","form","current","formData","body","JSON","stringify","handleChange","skillsList","title","user","firstName","lastName","phoneNumber","email","bio","jobs","educations","option","value","getTagProps","index","event","params","links"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport {\n  Typography,\n  Grid,\n  TextField,\n  Box,\n  Switch,\n  Chip\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { withAuthenticationRequired, useAuth0 } from \"@auth0/auth0-react\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport Navbar from \"../components/navbar/navbar.component\";\nimport ParallelogramIcon from \"../components/icons/parallelogram.icon\";\nimport SquareIcon from \"../components/icons/square.icon\";\nimport { getFormValues } from \"../helper/getFormValues\";\nimport { Resume as ResumeInterface } from \"../interface/resume.interface\";\nimport ResumeSection from \"../components/resume/resumeSection.component\";\nimport ResumePreview from \"../components/resume/resumePreview.component\";\nimport PersonalDetailsSection from \"../components/resume/personalDetails.component\";\nimport EducationSection from \"../components/resume/educationSection.component\";\nimport EmploymentSection from \"../components/resume/employmentSection.component\";\nimport LinkSection from \"../components/resume/linkSection.component\";\n\nexport default function Resume() {\n  const [skills, setSkills] = useState<string[] | null>();\n  const [resume, setResume] = useState<ResumeInterface | undefined>(undefined);\n  const [resumeStyle, setResumeStyle] = useState<1 | 2>(1);\n  const [checked, setChecked] = useState(false);\n  const formRef = useRef<HTMLFormElement>(null);\n  const { getAccessTokenSilently } = useAuth0();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        // setResume({} as ResumeInterface);\n        const token = await getAccessTokenSilently();\n  \n        const response = await fetch(\n          `http://localhost:3001/v1/resume/0`,\n          {\n            headers: {\n              Accept: \"application/json\",\n             \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n  \n        const responseData = await response.json();\n        if(responseData.statusCode === 404) {\n          const token = await getAccessTokenSilently();\n  \n        const response1 = await fetch(\n          `http://localhost:3001/v1/resume`,\n          {\n            method: \"POST\",\n            headers: {\n              Accept: \"application/json\",\n             \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        const responseData1 = await response1.json();\n        setResume(responseData1 as ResumeInterface);\n\n        const skillNames = responseData.skills.map(({name}) => {console.log(name);return name})\n        setSkills(skillNames)\n        } else {\n\n        setResume(responseData as ResumeInterface);\n        const skillNames = responseData.skills.map(({name}) => {console.log(name);return name})\n        setSkills(skillNames)\n        }\n  \n      } catch (error) {\n        console.log(error.message);\n      }\n    })();\n  }, [getAccessTokenSilently]);\n\n  const updateResume = async () => {\n    const form = formRef.current as HTMLFormElement;\n    const formData = getFormValues(form);\n    console.log(skills)\n    formData.skills = skills;\n    try {\n      const token = await getAccessTokenSilently();\n\n      const response = await fetch(\n        `http://localhost:3001/v1/resume/0`,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify(formData),\n          headers: {\n            Accept: \"application/json\",\n           \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      setResume(responseData as ResumeInterface);\n      const skillNames = responseData.skills.map(({name}) => {console.log(name);return name})\n      setSkills(skillNames)\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  const handleChange = () => {\n    setChecked(!checked);\n    setResumeStyle(!checked ? 2 : 1)\n  };\n  const skillsList = [\n    { title: 'React'},\n    { title: 'Javascript'},\n    { title: 'Java'},\n    { title: 'Front-end'},\n    { title: 'Back-end'},\n    { title: 'UI Design'},\n    { title: 'UX Research'},\n    { title: 'Copywriting'},\n    { title: 'Illustrating'},\n    { title: 'Figma'},\n  ];\n\n    return (\n        <>\n        <Navbar />\n      <Grid container>\n        <Grid item xs={12} sm={12} md={6}>\n          <ResumePreview resume={resume} resumeStyle={resumeStyle}/>\n        </Grid>\n        <Grid item xs={12} sm={12} md={6}>\n          <Box p={3} pt={12}>\n            <Grid container direction=\"column\">\n              <form ref={formRef} noValidate autoComplete=\"off\">\n                <Box pb={4}>\n                  <Grid item>\n                    <Grid container justify=\"space-between\" alignItems=\"center\">\n                      <Grid item>\n                      {!resume ? <Skeleton variant=\"text\" width={140} height={26} />:\n                        <Typography variant=\"h2\">Your Résumé</Typography>\n                         } \n                      </Grid>\n                     \n                      <Grid item>\n                      <Switch\n                        checked={checked}\n                        onChange={handleChange}\n                        name=\"checkedA\"\n                        inputProps={{ 'aria-label': 'secondary checkbox' }}\n                      />\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                </Box>\n\n                <PersonalDetailsSection \n                loading={!resume}\n                onChange={updateResume}\n                firstName={resume && resume.user && resume.user.firstName} \n                lastName={resume && resume.user && resume.user.lastName} \n                phoneNumber={resume && resume.user && resume.user.phoneNumber} \n                email={resume && resume.user && resume.user.email} \n                title={resume && resume.resume && resume.resume.title}/>\n\n                <ResumeSection\n                  loading={!resume}\n                  icon={<ParallelogramIcon fontSize=\"large\" />}\n                  heading=\"Describe you and your work\"\n                  subtitle=\"Summarise your professional career in 2 or 3 sentences.\"\n                >\n                  {!resume ?  <Skeleton variant=\"rect\" width=\"100%\" height={114} />:\n                  <TextField\n                    name=\"bio\"\n                    fullWidth\n                    id=\"filled-textarea\"\n                    multiline\n                    variant=\"filled\"\n                    rows={4}\n                    defaultValue={resume && resume.resume && resume.resume.bio}\n                    onChange={() => updateResume()}\n                  />\n                  }\n                </ResumeSection> \n\n                {resume && <EmploymentSection employment={resume?.jobs} onChange={updateResume}/> }\n\n                {resume && <EducationSection educations={resume?.educations} onChange={updateResume}/>}\n                \n                {resume &&skills &&<ResumeSection\n                  icon={<SquareIcon fontSize=\"large\" />}\n                  heading=\"Skills\"\n                  subtitle=\"Add keywords to your resume to help potential employers get a clearer picture of what your skills are in the workplace.\"\n                >\n                  <Autocomplete\n                    multiple\n                    id=\"skills\"\n                    options={skillsList.map((option) => option.title)}\n                    freeSolo\n\n                    renderTags={(value, getTagProps) => \n                       value.map((option, index) => (\n                        <Chip color=\"primary\" label={option} {...getTagProps({ index })} />\n                      ))\n                    }\n                    // defaultValue={[...skills]}\n                    onChange={ (event, value) => {\n                      console.log(value)\n                      setSkills(value);\n                      updateResume()\n                  }}\n                    renderInput={(params) => (\n                      <TextField {...params} variant=\"filled\" placeholder=\"Add skills\" \n                      fullWidth\n                     />\n                    )}\n                  />\n                </ResumeSection>}\n\n                {resume && <LinkSection links={resume?.links} onChange={updateResume}/> }\n\n              </form>\n            </Grid>\n          </Box>\n        </Grid>\n      </Grid>\n      </>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}