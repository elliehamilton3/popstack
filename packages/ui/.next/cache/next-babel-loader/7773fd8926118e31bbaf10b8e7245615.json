{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/ellie/Developer/popstack/packages/ui/pages/dashboard.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, Button } from \"@material-ui/core\";\nexport default function Dashboard() {\n  _s();\n\n  var _this = this;\n\n  var _useAuth = useAuth0(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      getAccessTokenSilently = _useAuth.getAccessTokenSilently;\n\n  var _useState = useState(),\n      resumeList = _useState[0],\n      setResumeList = _useState[1];\n\n  var callSecureApi = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData, resumes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"http://localhost:3001/v1/users/me\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n              resumes = responseData.resumes.map(function (resume) {\n                return {\n                  id: resume.id,\n                  type: \"Resume\",\n                  title: \"Alexandra's resume\"\n                };\n              });\n              setResumeList(resumes);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function callSecureApi() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }), __jsx(Box, {\n    p: 10,\n    mt: 18,\n    bgcolor: \"#ffb7d5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, isAuthenticated ? __jsx(React.Fragment, null, __jsx(Typography, {\n    variant: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, \"My resumes and cover letters\"), __jsx(Typography, {\n    variant: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 11\n    }\n  }, user.name), __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, user.email), __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, user.sub), __jsx(Button, {\n    onClick: callSecureApi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, \"Get user\"), __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, resumeList && resumeList.map(function (resume, i) {\n    return __jsx(Grid, {\n      item: true,\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      container: true,\n      direction: \"column\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }\n    }, __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }\n    }, __jsx(Paper, {\n      style: {\n        height: \"150px\",\n        width: \"100px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 26\n      }\n    })), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 27\n      }\n    }, resume.id)), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 27\n      }\n    }, resume.type)), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 27\n      }\n    }, resume.title))));\n  }))) : __jsx(React.Fragment, null)));\n}\n\n_s(Dashboard, \"tuxGVqnpMwiogDwTy0r2U+2hKgM=\", false, function () {\n  return [useAuth0];\n});\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/ellie/Developer/popstack/packages/ui/pages/dashboard.tsx"],"names":["useState","useAuth0","Navbar","Typography","Grid","Paper","Box","Button","Dashboard","user","isAuthenticated","getAccessTokenSilently","resumeList","setResumeList","callSecureApi","token","fetch","headers","Accept","Authorization","response","json","responseData","resumes","map","resume","id","type","title","console","log","message","name","email","sub","i","height","width"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, Button} from \"@material-ui/core\";\nimport { ResumeListItem } from \"../interface/resume.interface\";\n\nexport default function Dashboard() {\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [resumeList, setResumeList] = useState<ResumeListItem[]>();\n\n  const callSecureApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n\n      const response = await fetch(\n        `http://localhost:3001/v1/users/me`,\n        {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      const resumes = responseData.resumes.map((resume:any) => ({id: resume.id, type: \"Resume\", title: \"Alexandra's resume\"}))\n      setResumeList(resumes)\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  return (\n    <>\n      <Navbar />\n      <Box p={10} mt={18} bgcolor=\"#ffb7d5\">\n        {isAuthenticated ? (\n          <>\n          <Typography variant=\"h1\">My resumes and cover letters</Typography>\n          <Typography variant=\"h1\">{user.name}</Typography>\n          <Typography>{user.email}</Typography>\n          <Typography>{user.sub}</Typography>\n          <Button onClick={callSecureApi}>Get user</Button>\n          <Grid container>\n          {resumeList && resumeList.map((resume, i) => (\n            <Grid item key={i}>\n              <Grid container direction=\"column\">\n              <Grid item><Paper style={{height: \"150px\", width: \"100px\"}}/></Grid>\n              <Grid item> <Typography>{resume.id}</Typography></Grid>\n              \n              <Grid item> <Typography>{resume.type}</Typography></Grid>\n              <Grid item> <Typography>{resume.title}</Typography></Grid>\n                </Grid>\n            </Grid>\n          ))}\n          </Grid>\n        </>\n        )    \n        : <></>}\n        </Box>\n      </>\n  )\n}"]},"metadata":{},"sourceType":"module"}