{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, Button } from \"@material-ui/core\";\nexport default function Dashboard() {\n  var _useAuth = useAuth0(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      getAccessTokenSilently = _useAuth.getAccessTokenSilently;\n\n  var _useState = useState(),\n      resumeList = _useState[0],\n      setResumeList = _useState[1];\n\n  var callSecureApi = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData, resumes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"http://localhost:3000/v1/users/me\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n              resumes = responseData.resumes.map(function (resume) {\n                return {\n                  id: resume.id,\n                  type: \"Resume\",\n                  title: \"Alexandra's resume\"\n                };\n              });\n              setResumeList(resumes);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function callSecureApi() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, null), __jsx(Box, {\n    pt: 10,\n    bgcolor: \"#ffb7d5\"\n  }, isAuthenticated ? __jsx(React.Fragment, null, __jsx(Typography, {\n    variant: \"h1\"\n  }, \"My resumes and cover letters\"), __jsx(Typography, {\n    variant: \"h1\"\n  }, user.name), __jsx(Typography, null, user.email), __jsx(Typography, null, user.sub), __jsx(Button, {\n    onClick: callSecureApi\n  }, \"Get user\"), __jsx(Grid, {\n    container: true\n  }, resumeList && resumeList.map(function (resume, i) {\n    return __jsx(Grid, {\n      item: true,\n      key: i\n    }, __jsx(Grid, {\n      container: true,\n      direction: \"column\"\n    }, __jsx(Grid, {\n      item: true\n    }, __jsx(Paper, {\n      style: {\n        height: \"150px\",\n        width: \"100px\"\n      }\n    })), __jsx(Grid, {\n      item: true\n    }, \" \", __jsx(Typography, null, resume.id)), __jsx(Grid, {\n      item: true\n    }, \" \", __jsx(Typography, null, resume.type)), __jsx(Grid, {\n      item: true\n    }, \" \", __jsx(Typography, null, resume.title))));\n  }))) : __jsx(React.Fragment, null)));\n}","map":null,"metadata":{},"sourceType":"module"}