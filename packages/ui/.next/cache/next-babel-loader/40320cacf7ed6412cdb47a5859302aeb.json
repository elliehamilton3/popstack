{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ellie/Developer/popstack/packages/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/ellie/Developer/popstack/packages/ui/pages/dashboard.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, Button, IconButton } from \"@material-ui/core\";\nimport AddIcon from '@material-ui/icons/Add';\nexport default function Dashboard() {\n  _s();\n\n  var _this = this;\n\n  var _useAuth = useAuth0(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      getAccessTokenSilently = _useAuth.getAccessTokenSilently;\n\n  var _useState = useState(),\n      resumeList = _useState[0],\n      setResumeList = _useState[1];\n\n  var callSecureApi = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, response, responseData, resumes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context.sent;\n              _context.next = 6;\n              return fetch(\"http://localhost:3001/v1/users/me\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context.sent;\n              resumes = responseData.resumes.map(function (resume) {\n                return {\n                  id: resume.id,\n                  type: \"Resume\",\n                  title: \"Alexandra's resume\"\n                };\n              });\n              setResumeList(resumes);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function callSecureApi() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var createResume = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var token, response, responseData, resumes;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return getAccessTokenSilently();\n\n            case 3:\n              token = _context2.sent;\n              _context2.next = 6;\n              return fetch(\"http://localhost:3001/v1/users/me\", {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(token)\n                },\n                method: \"POST\"\n              });\n\n            case 6:\n              response = _context2.sent;\n              _context2.next = 9;\n              return response.json();\n\n            case 9:\n              responseData = _context2.sent;\n              resumes = responseData.resumes.map(function (resume) {\n                return {\n                  id: resume.id,\n                  type: \"Resume\",\n                  title: \"Alexandra's resume\"\n                };\n              });\n              setResumeList(resumes);\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14]]);\n    }));\n\n    return function createResume() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), isAuthenticated ? __jsx(Box, {\n    p: 12,\n    bgcolor: \"#ffb7d5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, \"My resumes and cover letters\"), __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, user.email), __jsx(Button, {\n    onClick: callSecureApi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Get user\"), __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, resumeList && resumeList.map(function (resume, i) {\n    return __jsx(Grid, {\n      item: true,\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      container: true,\n      direction: \"column\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }, __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, __jsx(Paper, {\n      style: {\n        height: \"150px\",\n        width: \"100px\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 26\n      }\n    })), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 27\n      }\n    }, resume.id)), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 27\n      }\n    }, resume.type)), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 15\n      }\n    }, \" \", __jsx(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 27\n      }\n    }, resume.title))));\n  })), __jsx(Paper, {\n    style: {\n      height: \"150px\",\n      width: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    alignContent: \"center\",\n    style: {\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, __jsx(IconButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, __jsx(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  })))))) : __jsx(React.Fragment, null));\n}\n\n_s(Dashboard, \"tuxGVqnpMwiogDwTy0r2U+2hKgM=\", false, function () {\n  return [useAuth0];\n});\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/ellie/Developer/popstack/packages/ui/pages/dashboard.tsx"],"names":["useState","useAuth0","Navbar","Typography","Grid","Paper","Box","Button","IconButton","AddIcon","Dashboard","user","isAuthenticated","getAccessTokenSilently","resumeList","setResumeList","callSecureApi","token","fetch","headers","Accept","Authorization","response","json","responseData","resumes","map","resume","id","type","title","console","log","message","createResume","method","email","i","height","width"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, Button, IconButton} from \"@material-ui/core\";\nimport { ResumeListItem } from \"../interface/resume.interface\";\nimport AddIcon from '@material-ui/icons/Add';\n\nexport default function Dashboard() {\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [resumeList, setResumeList] = useState<ResumeListItem[]>();\n\n  const callSecureApi = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n\n      const response = await fetch(\n        `http://localhost:3001/v1/users/me`,\n        {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      const resumes = responseData.resumes.map((resume:any) => ({id: resume.id, type: \"Resume\", title: \"Alexandra's resume\"}))\n      setResumeList(resumes)\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  const createResume = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n\n      const response = await fetch(\n        `http://localhost:3001/v1/users/me`,\n        {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          method: \"POST\"\n        }\n      );\n\n      const responseData = await response.json();\n      const resumes = responseData.resumes.map((resume:any) => ({id: resume.id, type: \"Resume\", title: \"Alexandra's resume\"}))\n      setResumeList(resumes)\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  return (\n    <>\n        <Navbar />\n        {isAuthenticated ? (\n          <Box p={12} bgcolor=\"#ffb7d5\">\n          <Typography variant=\"h2\">My resumes and cover letters</Typography>\n          <Typography>{user.email}</Typography>\n          <Button onClick={callSecureApi}>Get user</Button>\n          <Grid container>\n          {resumeList && resumeList.map((resume, i) => (\n            <Grid item key={i}>\n              <Grid container direction=\"column\">\n              <Grid item><Paper style={{height: \"150px\", width: \"100px\"}}/></Grid>\n              <Grid item> <Typography>{resume.id}</Typography></Grid>\n              \n              <Grid item> <Typography>{resume.type}</Typography></Grid>\n              <Grid item> <Typography>{resume.title}</Typography></Grid>\n                </Grid>\n            </Grid>\n          ))}\n          </Grid>\n          <Paper style={{height: \"150px\", width: \"100px\"}}>\n            <Grid container justify=\"center\" alignContent=\"center\" style={{height: \"100%\"}}>\n              <Grid item>\n            <IconButton><AddIcon/></IconButton>\n            </Grid></Grid>\n            </Paper>\n\n          </Box>\n        )    \n        : <></>}\n      </>\n  )\n}"]},"metadata":{},"sourceType":"module"}