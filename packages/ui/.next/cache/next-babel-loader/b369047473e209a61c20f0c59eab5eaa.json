{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\nimport { Typography, Grid, Paper, Box, IconButton } from \"@material-ui/core\";\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\nexport default function Dashboard() {\n  const {\n    user,\n    isAuthenticated,\n    getAccessTokenSilently\n  } = useAuth0();\n  const {\n    0: resumeList,\n    1: setResumeList\n  } = useState();\n  useEffect(() => {\n    getUserData();\n  }, [user]);\n\n  const getUserData = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(`http://localhost:3001/v1/users/me`, {\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const responseData = await response.json();\n      const resumes = responseData.resumes.map(resume => ({\n        id: resume.id,\n        type: \"Resume\",\n        title: \"Alexandra's resume\"\n      }));\n      setResumeList(resumes);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  const createResume = async () => {\n    try {\n      const token = await getAccessTokenSilently();\n      await fetch(`http://localhost:3001/v1/resume/0`, {\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        method: \"POST\"\n      });\n      getUserData();\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, null), __jsx(Box, {\n    p: 12,\n    bgcolor: \"#ffdbeb\",\n    height: \"100%\"\n  }, isAuthenticated ? __jsx(React.Fragment, null, __jsx(Box, {\n    pb: 5\n  }, __jsx(Typography, {\n    variant: \"h2\"\n  }, \"My resumes and cover letters\"), __jsx(Typography, null, user.email)), __jsx(Grid, {\n    container: true,\n    spacing: 4\n  }, resumeList && resumeList.map((resume, i) => __jsx(Grid, {\n    item: true,\n    xs: 4,\n    sm: 3,\n    key: i\n  }, __jsx(Grid, {\n    container: true,\n    direction: \"column\"\n  }, __jsx(Grid, {\n    item: true\n  }, __jsx(Paper, {\n    style: {\n      height: \"calc(46vw - 180px)\",\n      width: \"100%\"\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignContent: \"center\",\n    style: {\n      height: \"100%\"\n    },\n    direction: \"column\"\n  }, __jsx(Grid, {\n    item: true\n  }, __jsx(IconButton, null, __jsx(DeleteForeverIcon, null))), __jsx(Grid, {\n    item: true\n  }, __jsx(IconButton, null, __jsx(LaunchIcon, null))), __jsx(Grid, {\n    item: true\n  }, __jsx(IconButton, null, __jsx(GetAppIcon, null)))))), __jsx(Grid, {\n    item: true\n  }, \" \", __jsx(Box, {\n    pt: 1\n  }, \" \", __jsx(Typography, null, resume.type, \" - \", resume.id))), __jsx(Grid, {\n    item: true\n  }, \" \", __jsx(Typography, {\n    style: {\n      fontWeight: 700\n    }\n  }, resume.title))))), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    sm: 3\n  }, __jsx(Paper, {\n    style: {\n      height: \"calc(46vw - 180px)\",\n      width: \"100%\"\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"center\",\n    alignContent: \"center\",\n    style: {\n      height: \"100%\"\n    }\n  }, __jsx(Grid, {\n    item: true\n  }, __jsx(IconButton, {\n    onClick: () => createResume()\n  }, __jsx(AddIcon, null)))))))) : __jsx(React.Fragment, null)));\n}","map":null,"metadata":{},"sourceType":"module"}