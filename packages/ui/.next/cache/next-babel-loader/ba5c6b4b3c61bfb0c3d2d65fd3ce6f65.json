{"ast":null,"code":"var _jsxFileName = \"/Users/ellie/Developer/popstack/packages/ui/components/CheckoutForm.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport getStripe from '../utils/get-stripejs';\nimport { fetchPostJSON } from '../utils/api-helpers';\nimport { Card, CardContent, Typography, CardActions, Button, Grid } from '@material-ui/core';\n\nconst CheckoutForm = () => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false); // React.FormEventHandler<HTMLFormElement>\n\n  const handleSubmit = priceId => async e => {\n    e.preventDefault();\n    setLoading(true); // Create a Checkout Session.\n\n    const response = await fetchPostJSON('/api/checkout_sessions', {\n      priceId\n    });\n\n    if (response.statusCode === 500) {\n      console.error(response.message);\n      return;\n    } // Redirect to Checkout.\n\n\n    const stripe = await getStripe();\n    const {\n      error\n    } = await stripe.redirectToCheckout({\n      // Make the id field from the Checkout Session creation API response\n      // available to this file, so you can provide it as parameter here\n      // instead of the {{CHECKOUT_SESSION_ID}} placeholder.\n      sessionId: response.id\n    }); // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n\n    console.warn(error.message);\n    setLoading(false);\n  };\n\n  return __jsx(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 1\n    }\n  }, __jsx(Grid, {\n    item: true,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 3\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(\"oneweek\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 1\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, \"\\xA32\"), __jsx(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, \"7-day trial\")), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    type: \"submit\",\n    disabled: loading,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"Pay now\"))))), __jsx(Grid, {\n    item: true,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(\"monthly\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 1\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 3\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"\\xA35\"), __jsx(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"1 month\")), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    type: \"submit\",\n    disabled: loading,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Pay now\"))))), __jsx(Grid, {\n    item: true,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(\"yearly\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 1\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 3\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"\\xA350\"), __jsx(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, \"1 year\")), __jsx(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    type: \"submit\",\n    disabled: loading,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Pay now\"))))));\n};\n\nexport default CheckoutForm;","map":{"version":3,"sources":["/Users/ellie/Developer/popstack/packages/ui/components/CheckoutForm.tsx"],"names":["React","useState","getStripe","fetchPostJSON","Card","CardContent","Typography","CardActions","Button","Grid","CheckoutForm","loading","setLoading","handleSubmit","priceId","e","preventDefault","response","statusCode","console","error","message","stripe","redirectToCheckout","sessionId","id","warn"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\n\nimport getStripe from '../utils/get-stripejs'\nimport { fetchPostJSON } from '../utils/api-helpers'\nimport { Card, CardContent, Typography, CardActions, Button, Grid } from '@material-ui/core'\n\nconst CheckoutForm = () => {\n  const [loading, setLoading] = useState(false)\n  // React.FormEventHandler<HTMLFormElement>\n  const handleSubmit = (priceId: \"oneweek\" |\"monthly\" | \"yearly\") => async (e: any) => {\n    e.preventDefault()\n    setLoading(true)\n    // Create a Checkout Session.\n    const response = await fetchPostJSON('/api/checkout_sessions', {\n      priceId\n    })\n\n    if (response.statusCode === 500) {\n      console.error(response.message)\n      return\n    }\n\n    // Redirect to Checkout.\n    const stripe = await getStripe()\n    const { error } = await stripe!.redirectToCheckout({\n      // Make the id field from the Checkout Session creation API response\n      // available to this file, so you can provide it as parameter here\n      // instead of the {{CHECKOUT_SESSION_ID}} placeholder.\n      sessionId: response.id,\n    })\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    console.warn(error.message)\n    setLoading(false)\n  }\n\n  return (\n<Grid container spacing={3}>\n  <Grid item sm={4}>\n<form onSubmit={handleSubmit(\"oneweek\")}>\n  <Card>\n      <CardContent>\n        <Typography variant=\"h2\">£2</Typography>\n        <Typography variant=\"h3\">7-day trial</Typography>\n      </CardContent>\n      <CardActions>\n        <Button size=\"small\" variant=\"contained\" type=\"submit\" disabled={loading} color=\"primary\">Pay now</Button>\n      </CardActions>\n    </Card>\n    </form>\n    </Grid>\n    <Grid item sm={4}>\n<form onSubmit={handleSubmit(\"monthly\")}>\n  <Card>\n      <CardContent>\n        <Typography variant=\"h2\">£5</Typography>\n        <Typography variant=\"h3\">1 month</Typography>\n      </CardContent>\n      <CardActions>\n        <Button size=\"small\" variant=\"contained\" type=\"submit\" disabled={loading} color=\"primary\">Pay now</Button>\n      </CardActions>\n    </Card>\n    </form>\n    </Grid>\n    <Grid item sm={4}>\n<form onSubmit={handleSubmit(\"yearly\")}>\n  <Card>\n      <CardContent>\n        <Typography variant=\"h2\">£50</Typography>\n        <Typography variant=\"h3\">1 year</Typography>\n      </CardContent>\n      <CardActions>\n        <Button size=\"small\" variant=\"contained\" type=\"submit\" disabled={loading} color=\"primary\">Pay now</Button>\n      </CardActions>\n    </Card>\n    </form>\n    </Grid>\n\n</Grid>\n  )\n}\n\nexport default CheckoutForm\n"]},"metadata":{},"sourceType":"module"}