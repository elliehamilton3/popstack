{"ast":null,"code":"var _jsxFileName = \"/Users/ellie/Developer/popstack/packages/ui/pages/resume.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useRef } from \"react\";\nimport { Button, Typography, Grid, TextField, Box, makeStyles, lighten, Switch } from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\"; // import apiFetch from \"../../service/apiFetch.service\";\n\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ParallelogramIcon from \"../components/icons/parallelogram.icon\";\nimport SquareIcon from \"../components/icons/square.icon\";\nimport RectangleIcon from \"../components/icons/rectangle.icon\";\nimport { getFormValues } from \"../helper/getFormValues\";\nimport ResumeSection from \"../components/resume/resumeSection.component\";\nimport ResumePreview from \"../components/resume/resumePreview.component\";\nimport PersonalDetailsSection from \"../components/resume/personalDetails.component\";\nimport EducationSection from \"../components/resume/educationSection.component\";\nimport EmploymentSection from \"../components/resume/employmentSection.component\";\nconst useStyles = makeStyles(theme => ({\n  button: {\n    justifyContent: \"space-between\",\n    color: lighten(theme.palette.common.black, 0.4),\n    padding: \"10px 16px\"\n  },\n  icon: {\n    color: lighten(theme.palette.primary.light, 0.7)\n  }\n}));\nexport default function Resume() {\n  const {\n    0: resume,\n    1: setResume\n  } = useState(undefined);\n  const {\n    0: resumeStyle,\n    1: setResumeStyle\n  } = useState(1);\n  const {\n    0: checked,\n    1: setChecked\n  } = useState(false);\n  const classes = useStyles();\n  const formRef = useRef(null);\n  const {\n    getAccessTokenSilently\n  } = useAuth0();\n  useEffect(() => {\n    (async () => {\n      try {\n        const token = await getAccessTokenSilently();\n        const response = await fetch(`http://localhost:3001/v1/resume/0`, {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const responseData = await response.json();\n\n        if (responseData.statusCode === 404) {\n          const token = await getAccessTokenSilently();\n          const response1 = await fetch(`http://localhost:3001/v1/resume`, {\n            method: \"POST\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`\n            }\n          });\n          const responseData1 = await response1.json();\n          setResume(responseData1);\n        } else {\n          setResume(responseData);\n        }\n      } catch (error) {\n        console.log(error.message);\n      }\n    })();\n  }, [getAccessTokenSilently]);\n\n  const updateResume = async () => {\n    const form = formRef.current;\n    const formData = getFormValues(form);\n\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(`http://localhost:3001/v1/resume/0`, {\n        method: \"PATCH\",\n        body: JSON.stringify(formData),\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const responseData = await response.json();\n      setResume(responseData);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  const handleChange = () => {\n    setChecked(!checked);\n    setResumeStyle(!checked ? 2 : 1);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }), __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, __jsx(ResumePreview, {\n    resume: resume,\n    resumeStyle: resumeStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    p: 3,\n    pt: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"form\", {\n    ref: formRef,\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, __jsx(Box, {\n    pb: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }\n  }, !resume ? __jsx(Skeleton, {\n    variant: \"text\",\n    width: 140,\n    height: 26,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 34\n    }\n  }) : __jsx(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Your Resum\\xE9\")), __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 23\n    }\n  }, __jsx(Switch, {\n    checked: checked,\n    onChange: handleChange,\n    name: \"checkedA\",\n    inputProps: {\n      'aria-label': 'secondary checkbox'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }))))), __jsx(PersonalDetailsSection, {\n    loading: !resume,\n    onChange: updateResume,\n    firstName: resume && resume.user && resume.user.firstName,\n    lastName: resume && resume.user && resume.user.lastName,\n    phoneNumber: resume && resume.user && resume.user.phoneNumber,\n    email: resume && resume.user && resume.user.email,\n    title: resume && resume.resume && resume.resume.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }), __jsx(ResumeSection, {\n    loading: !resume,\n    icon: __jsx(ParallelogramIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }),\n    heading: \"Describe you and your work\",\n    subtitle: \"Summarise your professional career in 2 or 3 sentences.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, !resume ? __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"100%\",\n    height: 114,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 31\n    }\n  }) : __jsx(TextField, {\n    name: \"bio\",\n    fullWidth: true,\n    id: \"filled-textarea\",\n    multiline: true,\n    variant: \"filled\",\n    rows: 4,\n    defaultValue: resume && resume.resume && resume.resume.bio,\n    onChange: () => updateResume(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  })), resume && __jsx(EmploymentSection, {\n    employment: resume === null || resume === void 0 ? void 0 : resume.jobs,\n    onChange: updateResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 28\n    }\n  }), resume && __jsx(EducationSection, {\n    educations: resume === null || resume === void 0 ? void 0 : resume.educations,\n    onChange: updateResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 28\n    }\n  }), resume && __jsx(ResumeSection, {\n    icon: __jsx(RectangleIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }),\n    heading: \"Websites & social media links\",\n    subtitle: \"Include a link to your personal website or portfolio, Github repository, LinkedIn, or anything you might want potential employers to see.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 28\n    }\n  }, __jsx(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    className: classes.button,\n    fullWidth: true,\n    endIcon: __jsx(AddIcon, {\n      className: classes.icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 30\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, \"Add website or link\")), resume && __jsx(ResumeSection, {\n    icon: __jsx(SquareIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }\n    }),\n    heading: \"Skills\",\n    subtitle: \"Add any skills you have that you want to highlight.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 27\n    }\n  }, __jsx(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    className: classes.button,\n    fullWidth: true,\n    endIcon: __jsx(AddIcon, {\n      className: classes.icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 30\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, \"Add a skill\"))))))));\n}","map":{"version":3,"sources":["/Users/ellie/Developer/popstack/packages/ui/pages/resume.tsx"],"names":["useEffect","useState","useRef","Button","Typography","Grid","TextField","Box","makeStyles","lighten","Switch","Skeleton","useAuth0","Navbar","AddIcon","ParallelogramIcon","SquareIcon","RectangleIcon","getFormValues","ResumeSection","ResumePreview","PersonalDetailsSection","EducationSection","EmploymentSection","useStyles","theme","button","justifyContent","color","palette","common","black","padding","icon","primary","light","Resume","resume","setResume","undefined","resumeStyle","setResumeStyle","checked","setChecked","classes","formRef","getAccessTokenSilently","token","response","fetch","headers","Accept","Authorization","responseData","json","statusCode","response1","method","responseData1","error","console","log","message","updateResume","form","current","formData","body","JSON","stringify","handleChange","user","firstName","lastName","phoneNumber","email","title","bio","jobs","educations"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport {\n  Button,\n  Typography,\n  Grid,\n  TextField,\n  Box,\n  makeStyles,\n  lighten,\n  Switch,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { withAuthenticationRequired, useAuth0 } from \"@auth0/auth0-react\";\nimport Navbar from \"../components/navbar/navbar.component\";\n// import apiFetch from \"../../service/apiFetch.service\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ParallelogramIcon from \"../components/icons/parallelogram.icon\";\nimport SquareIcon from \"../components/icons/square.icon\";\nimport RectangleIcon from \"../components/icons/rectangle.icon\";\nimport { getFormValues } from \"../helper/getFormValues\";\nimport { Resume as ResumeInterface } from \"../interface/resume.interface\";\nimport ResumeSection from \"../components/resume/resumeSection.component\";\nimport ResumePreview from \"../components/resume/resumePreview.component\";\nimport PersonalDetailsSection from \"../components/resume/personalDetails.component\";\nimport EducationSection from \"../components/resume/educationSection.component\";\nimport EmploymentSection from \"../components/resume/employmentSection.component\";\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    justifyContent: \"space-between\",\n    color: lighten(theme.palette.common.black, 0.4),\n    padding: \"10px 16px\",\n  },\n  icon: {\n    color: lighten(theme.palette.primary.light, 0.7),\n  },\n}));\n\nexport default function Resume() {\n\n  const [resume, setResume] = useState<ResumeInterface | undefined>(undefined);\n  const [resumeStyle, setResumeStyle] = useState<1 | 2>(1);\n  const [checked, setChecked] = useState(false);\n  const classes = useStyles();\n  const formRef = useRef<HTMLFormElement>(null);\n  const { getAccessTokenSilently } = useAuth0();\n\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const token = await getAccessTokenSilently();\n  \n        const response = await fetch(\n          `http://localhost:3001/v1/resume/0`,\n          {\n            headers: {\n              Accept: \"application/json\",\n             \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n  \n        const responseData = await response.json();\n        if(responseData.statusCode === 404) {\n          const token = await getAccessTokenSilently();\n  \n        const response1 = await fetch(\n          `http://localhost:3001/v1/resume`,\n          {\n            method: \"POST\",\n            headers: {\n              Accept: \"application/json\",\n             \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        const responseData1 = await response1.json();\n        setResume(responseData1 as ResumeInterface);\n        } else {\n\n        setResume(responseData as ResumeInterface);\n        }\n  \n      } catch (error) {\n        console.log(error.message);\n      }\n    })();\n  }, [getAccessTokenSilently]);\n\n  const updateResume = async () => {\n    const form = formRef.current as HTMLFormElement;\n    const formData = getFormValues(form);\n    try {\n      const token = await getAccessTokenSilently();\n\n      const response = await fetch(\n        `http://localhost:3001/v1/resume/0`,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify(formData),\n          headers: {\n            Accept: \"application/json\",\n           \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const responseData = await response.json();\n      setResume(responseData as ResumeInterface);\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  const handleChange = () => {\n    setChecked(!checked);\n    setResumeStyle(!checked ? 2 : 1)\n  };\n\n    return (\n        <>\n        <Navbar />\n      <Grid container>\n        <Grid item xs={12} sm={12} md={6}>\n          <ResumePreview resume={resume} resumeStyle={resumeStyle}/>\n        </Grid>\n        <Grid item xs={12} sm={12} md={6}>\n          <Box p={3} pt={12}>\n            <Grid container direction=\"column\">\n              <form ref={formRef} noValidate autoComplete=\"off\">\n                <Box pb={4}>\n                  <Grid item>\n                    <Grid container justify=\"space-between\" alignItems=\"center\">\n                      <Grid item>\n                      {!resume ? <Skeleton variant=\"text\" width={140} height={26} />:\n                        <Typography variant=\"h2\">Your Resumé</Typography>\n                         } \n                      </Grid>\n                     \n                      <Grid item>\n                      <Switch\n                        checked={checked}\n                        onChange={handleChange}\n                        name=\"checkedA\"\n                        inputProps={{ 'aria-label': 'secondary checkbox' }}\n                      />\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                </Box>\n\n                <PersonalDetailsSection \n                loading={!resume}\n                onChange={updateResume}\n                firstName={resume && resume.user && resume.user.firstName} \n                lastName={resume && resume.user && resume.user.lastName} \n                phoneNumber={resume && resume.user && resume.user.phoneNumber} \n                email={resume && resume.user && resume.user.email} \n                title={resume && resume.resume && resume.resume.title}/>\n\n                <ResumeSection\n                  loading={!resume}\n                  icon={<ParallelogramIcon fontSize=\"large\" />}\n                  heading=\"Describe you and your work\"\n                  subtitle=\"Summarise your professional career in 2 or 3 sentences.\"\n                >\n                  {!resume ?  <Skeleton variant=\"rect\" width=\"100%\" height={114} />:\n                  <TextField\n                    name=\"bio\"\n                    fullWidth\n                    id=\"filled-textarea\"\n                    multiline\n                    variant=\"filled\"\n                    rows={4}\n                    defaultValue={resume && resume.resume && resume.resume.bio}\n                    onChange={() => updateResume()}\n                  />\n                  }\n                </ResumeSection> \n\n                {resume && <EmploymentSection employment={resume?.jobs} onChange={updateResume}/> }\n\n                {resume && <EducationSection educations={resume?.educations} onChange={updateResume}/>}\n                \n                {resume && <ResumeSection\n                  icon={<RectangleIcon fontSize=\"large\" />}\n                  heading=\"Websites &amp; social media links\"\n                  subtitle=\"Include a link to your personal website or portfolio,\n                  Github repository, LinkedIn, or anything you might want\n                  potential employers to see.\"\n                >\n                  <Button\n                    color=\"secondary\"\n                    variant=\"outlined\"\n                    className={classes.button}\n                    fullWidth\n                    endIcon={<AddIcon className={classes.icon} />}\n                  >\n                    Add website or link\n                  </Button>\n                </ResumeSection>}\n\n                {resume &&<ResumeSection\n                  icon={<SquareIcon fontSize=\"large\" />}\n                  heading=\"Skills\"\n                  subtitle=\"Add any skills you have that you want to highlight.\"\n                >\n                  <Button\n                    color=\"secondary\"\n                    variant=\"outlined\"\n                    className={classes.button}\n                    fullWidth\n                    endIcon={<AddIcon className={classes.icon} />}\n                  >\n                    Add a skill\n                  </Button>\n                </ResumeSection>}\n              </form>\n            </Grid>\n          </Box>\n        </Grid>\n      </Grid>\n      </>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}